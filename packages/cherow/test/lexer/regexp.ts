import * as t from 'assert';
import { scanRegExp, RegExpState } from '../../src/lexer/regexp';
import { createParserObject } from '../../src/parser/parser';
import { Context } from '../../src/common';
import { Token, tokenDesc } from '../../src/token';

// Note! This is a WIP!  Dumping the tests for now. Yes, I know the CI broke!

// TODO!  Finish this!

describe.skip('Lexer - Regeular expressions', () => {

    const regExs: Array < [string, RegExpState] > = [

        ['B/', RegExpState.Valid],
        ['(?=/', RegExpState.Invalid],
        ['B/', RegExpState.Valid],
        ['a*b/', RegExpState.Valid],
        ['a*', RegExpState.Invalid],
        ['a?', RegExpState.Invalid],
        ['a+', RegExpState.Invalid],
        ['??/', RegExpState.Invalid],
        ['??/', RegExpState.Invalid],
        ['+?/', RegExpState.Invalid],
        ['|*/', RegExpState.Invalid],
        ['|?/', RegExpState.Invalid],
        ['|+/', RegExpState.Invalid],
        ['?a/', RegExpState.Invalid],
        ['+/', RegExpState.Invalid],
        ['?/', RegExpState.Invalid],
        ['*/', RegExpState.Invalid],
        ['*a/', RegExpState.Invalid],
        ['*a', RegExpState.Invalid],
        ['?', RegExpState.Invalid],
        ['+', RegExpState.Invalid],
        ['?a', RegExpState.Invalid],
        ['a**/', RegExpState.Invalid],
        ['a?+/', RegExpState.Invalid],
        ['a++/', RegExpState.Invalid],
        ['?/', RegExpState.Invalid],
        ['*/', RegExpState.Invalid],
        ['a{1,0}/', RegExpState.Invalid],
        ['a{2,1}/', RegExpState.Invalid],
        ['a{100,45}/', RegExpState.Invalid],
        ['a{1 ,1}/', RegExpState.Invalid],
        ['a{ 1 , 1}/', RegExpState.Invalid],
        ['a{1,1 }/', RegExpState.Invalid],
        ['a{1, 1 }/', RegExpState.Invalid],
        ['a{01,1}/', RegExpState.Invalid],
        ['a{0x01,1}/', RegExpState.Invalid],
        ['a{0x15,02}/', RegExpState.Invalid],
        ['a{0b01,04}/', RegExpState.Invalid],
        ['\\2(a)(/u', RegExpState.Invalid],
        ['\\2(a)(/', RegExpState.Invalid],
        ['(?:a)\\1/u', RegExpState.Invalid],
        ['(a)\\2/u', RegExpState.Invalid],
        ['(?:a)\\2/u', RegExpState.Invalid],
        ['(?:a)\\1/u', RegExpState.Invalid],
        ['(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)\\11/u', RegExpState.Valid],
        ['(?/', RegExpState.Invalid],
        ['(?/u', RegExpState.Invalid],
        ['(?a/u', RegExpState.Invalid],
        ['(?a)/u', RegExpState.Invalid],
        ['(?:/', RegExpState.Invalid],
        ['(?:a/', RegExpState.Invalid],
        ['(?:a/', RegExpState.Invalid],
        ['\\u{z/u', RegExpState.Invalid],
        ['\\u{20/u', RegExpState.Invalid],
        ['\\u{110000}/u', RegExpState.Invalid],
        ['\\377/u', RegExpState.Invalid],
        ['\\400/u', RegExpState.Invalid],
        ['\\a/u', RegExpState.Invalid],
        ['[b-a]/', RegExpState.Invalid],
        ['[b-a]/u', RegExpState.Invalid],
        ['[a-b--+]/', RegExpState.Invalid],
        ['[a-b--+]/u', RegExpState.Invalid],
        ['[\\c1]/u', RegExpState.Invalid],
        ['[\\x]/u', RegExpState.Invalid],
        ['[\\xz]/u', RegExpState.Invalid],
        ['[\\x1]/u', RegExpState.Invalid],
        ['[\\u]/u', RegExpState.Invalid],
        ['[\\u1]/u', RegExpState.Invalid],
        ['[\\u12]/u', RegExpState.Invalid],
        ['[\\u123]/u', RegExpState.Invalid],
        ['[\\u1234]/u', RegExpState.Unicode],
        ['[\\u{]/u', RegExpState.Invalid],
        ['[\\u{z]/u', RegExpState.Invalid],
        ['[\\u{20]/u', RegExpState.Invalid],
        ['[\\u{110000}]/u', RegExpState.Unicode],
        ['[\\77]/u', RegExpState.Invalid],
        ['[\\377]/u', RegExpState.Invalid],
        ['[\\$]/u', RegExpState.Unicode],
        ['[\\a]/u', RegExpState.Invalid],
        ['[\\d-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\D-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\s-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\S-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\w-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\W-\\uFFFF]/u', RegExpState.Unicode],
        ['[\\u0000-\\d]/u', RegExpState.Unicode],
        ['[\\u0000-\\D]/u', RegExpState.Unicode],
        ['[\\u0000-\\s]/u', RegExpState.Unicode],
        ['[\\u0000-\\S]/u', RegExpState.Unicode],
        ['[\\u0000-\\w]/u', RegExpState.Unicode],
        ['[\\u0000-\\W]/u', RegExpState.Unicode],
        ['[\\u0001-\\u0000]/', RegExpState.Invalid],
        ['[\\u0001-\\u0000]/u', RegExpState.Invalid],
        ['[\\u{1}-\\u{2}]/', RegExpState.Unicode],
        ['[\\u{2}-\\u{1}]/', RegExpState.Unicode],
        ['[\\u{2-\\u{1}]/u', RegExpState.Invalid],
        ['[\\a-\\z]/u', RegExpState.Invalid],
        ['[\\z-\\a]/', RegExpState.Invalid],
        ['[\\z-\\a]/u', RegExpState.Invalid],
        ['[0-9--+]/', RegExpState.Invalid],
        ['[0-9--+]/u', RegExpState.Invalid],
        ['[\\c-a]/', RegExpState.Invalid],
        ['[\\c0-]/u', RegExpState.Invalid],
        ['[ðŸŒ·-ðŸŒ¸]/u', RegExpState.Unicode],
        ['[\\uD834\\uDF06-\\uD834\\uDF08a-z]/', RegExpState.Unicode],
        ['[\\d][\\12-\\14]{1,}[^\\d]/u', RegExpState.Invalid],
        ['[ðŸŒ·-ðŸŒ¸]/u', RegExpState.Unicode],
        ['[ðŸŒ¸-ðŸŒ·]/', RegExpState.Invalid],
        ['[ðŸŒ¸-ðŸŒ·]/u', RegExpState.Invalid],
        ['^[^\\x20-\\x7e]*$/', RegExpState.Unicode],
        ['^[ã‚¡-ãƒ³ãƒ´ãƒ¼]*$/', RegExpState.Valid],
        ['a*/', RegExpState.Valid],
        ['a*b/', RegExpState.Valid],
        ['a?b/', RegExpState.Valid],
        ['a+b/', RegExpState.Valid],
        ['a??/', RegExpState.Valid],
        ['a{0}/', RegExpState.Valid],
        ['a{11}/', RegExpState.Valid],
        ['a{0,0}/', RegExpState.Valid],
        ['a{1,16}/', RegExpState.Valid],
        ['a{23,37}/', RegExpState.Valid],
        ['a{34,48}/', RegExpState.Valid],
        ['a{56,60}/', RegExpState.Valid],
        ['a{67,71}/', RegExpState.Valid],
        ['a{89,93}/', RegExpState.Valid],
        ['a{,50}/', RegExpState.Valid],
        ['^[ã-ã‚“ãƒ¼]*$/', RegExpState.Valid],
        ['^([1-9][0-9]*|0)(\\.[0-9]+)?$/', RegExpState.Valid],
        ['^\\d{1,3}(.\\d{1,3}){3}$/', RegExpState.Valid],
        ['^\\d{3}-\\d{4}$/', RegExpState.Valid],
        ['^https?:\\/\\//', RegExpState.Valid],
        ['^([0-9]{0,8})$/u', RegExpState.Valid],
        ['^([a-zA-Z0-9]{6,8})$/u', RegExpState.Valid],
        ['/^([0-9]{0,8})$/', RegExpState.Valid],
        ['^([a-zA-Z0-9]{6,8})$/', RegExpState.Valid],
        ['^[a-zA-Z0-9!-/:-@\\[-`{-~]*$/u', RegExpState.Unicode],
        ['^[a-zA-Z0-9!-/:-@\\[-`{-~]*$/', RegExpState.Unicode],
        ['^[a-zA-Z]+$/', RegExpState.Valid],
        ['^[0-9]+$/u', RegExpState.Valid],
        ['^[a-zA-Z]*$/', RegExpState.Valid],
        ['^[a-zA-Z]*$/', RegExpState.Valid],
        ['^[0-9]+$/', RegExpState.Valid],
        ['^[0-9]*$/', RegExpState.Valid],
        ['[ðŸŒ·-ðŸŒ¸]/u', RegExpState.Unicode],
        ['[\\c_]/', RegExpState.Invalid],
        ['[\\c0-]/', RegExpState.Invalid],
        ['[0-9--/]/', RegExpState.Invalid],
        ['[\\u0000-\\s]/', RegExpState.Unicode],
        ['[\\w-\\uFFFF]/', RegExpState.Unicode],
        ['[\\d-\\uFFFF]/', RegExpState.Unicode],
        ['[\\|]/', RegExpState.Unicode],
        ['[\\]]/', RegExpState.Unicode],
        ['[\\(]/u', RegExpState.Valid],
        ['[\\(]/', RegExpState.Valid],
        ['[\\?]/', RegExpState.Unicode],
        ['[\\$]/u', RegExpState.Unicode],
        ['[\\$]/', RegExpState.Unicode],
        ['[\\^]/', RegExpState.Unicode],
        ['[\\377]/', RegExpState.Invalid],
        ['[\\u{00000001}]/', RegExpState.Unicode],
        ['[\\u{a}]/', RegExpState.Unicode],
        ['[\\u1234]/', RegExpState.Unicode],
        ['[\\x123]/u', RegExpState.Unicode],
        ['[\\x12]/u', RegExpState.Unicode],
        ['[\\v]/', RegExpState.Unicode],
        ['[\\r]/u', RegExpState.Unicode],
        ['[\\f]/u', RegExpState.Unicode],
        ['[\\S]/', RegExpState.Unicode],
        ['[\\s]/', RegExpState.Unicode],
        ['[b\\-a]/u', RegExpState.Unicode],
        ['[a-b--/]/', RegExpState.Invalid],
        ['[a-]/', RegExpState.Valid],
        ['[-a-]/u', RegExpState.Valid],
        ['[--]/', RegExpState.Valid],
        ['[a]/', RegExpState.Valid],
        ['[-]/', RegExpState.Valid],
        ['[^-a-b-]/u', RegExpState.Valid],
        ['\\s/', RegExpState.Valid],
        ['[]/', RegExpState.Valid],
        ['\\a/', RegExpState.Invalid],
        ['\\p/', RegExpState.Invalid],
        ['\\q/', RegExpState.Invalid],
        ['\\Q/', RegExpState.Invalid],
        ['\\qabcd/', RegExpState.Invalid],
        ['\\Nabcd/', RegExpState.Invalid],
        ['\\a/', RegExpState.Invalid],
        ['\\//', RegExpState.Valid],
        ['\\{/', RegExpState.Valid],
        ['\\]/', RegExpState.Valid],
        ['\\[/u', RegExpState.Valid],
        ['\\[/', RegExpState.Valid],
        ['\\)/u', RegExpState.Valid],
        ['\\)/', RegExpState.Valid],
        ['\\(/u', RegExpState.Valid],
        ['\\(/', RegExpState.Valid],
        ['\\?/u', RegExpState.Valid],
        ['\\?/', RegExpState.Valid],
        ['\\+/u', RegExpState.Valid],
        ['\\./u', RegExpState.Valid],
        ['\\./', RegExpState.Valid],
        ['\\$/u', RegExpState.Valid],
        ['\\$/', RegExpState.Valid],
        ['\\u{20}/', RegExpState.Unicode],
        ['\\u{a}/u', RegExpState.Unicode],
        ['\\u12345/u', RegExpState.Valid],
        ['\\u12345/', RegExpState.Valid],
        ['\\t/u', RegExpState.Valid],
        ['\\v/', RegExpState.Valid],
        ['a{0}/', RegExpState.Valid],
        ['a{11}/', RegExpState.Valid],
        ['a{1}/', RegExpState.Valid],
        ['a{2}/', RegExpState.Valid],
        ['a{3}/', RegExpState.Valid],
        ['a{89}/', RegExpState.Valid],
        ['a{9,}/', RegExpState.Valid],
        ['a{78,}//', RegExpState.Valid],
        ['a{34,3}/', RegExpState.Invalid],
        ['a{3,38}/', RegExpState.Valid],
        ['\\f/', RegExpState.Valid],
        ['(?:a)/u', RegExpState.Valid],
        ['(?:a)/', RegExpState.Valid],
        ['(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)\\11/', RegExpState.Valid],
        ['(a)(a)(a)(a)(a)(a)(a)(a)(a)(a)\\10/', RegExpState.Valid],
        //['(?:a)\\2/', RegExpState.Valid],
        //        ['(a)\\2/', RegExpState.Valid],
        ['(?:a)\\1/', RegExpState.Invalid],
        ['(a)\\1/', RegExpState.Valid],
        ['a{2,27}/', RegExpState.Valid],

        ['|/', RegExpState.Valid],
        ['$/', RegExpState.Valid],
        ['./', RegExpState.Valid],
        ['[\\bc]/u', RegExpState.Valid],
        ['[a\\bb]/u', RegExpState.Valid],
        ['a{1,}?/', RegExpState.Valid],
        ['a{1}?/', RegExpState.Valid],
        //['a{a}?/', RegExpState.Valid],
        // ['a{}?/', RegExpState.Valid],
        ['a+?/', RegExpState.Valid],
        ['a*?/', RegExpState.Valid],
        //['a{1,2/', RegExpState.Valid],
        ['a{1,2}/', RegExpState.Valid],
        ['[^-J]/ug', RegExpState.Valid],
        ['^-fdsasgJ]/gu', RegExpState.Valid],
        ['[^J-]/ug', RegExpState.Valid],
        ['[^J-]/ug', RegExpState.Valid],
        ['[\\b]/u', RegExpState.Valid],
        ['[a\\bc]/u', RegExpState.Valid],
        ['[\\bc]/u', RegExpState.Valid],
        ['[a\\bb]/u', RegExpState.Valid],
        ['[a\\-b]/u', RegExpState.Unicode],
        ['[\\-c]/u', RegExpState.Unicode],
        ['[a\\-c]/u', RegExpState.Unicode],
        ['[^---]/ug', RegExpState.Valid],
        ['a{,27}/', RegExpState.Valid],
        ['a{1,1}/', RegExpState.Valid],
        ['a{1,1}/', RegExpState.Valid],
        ['oo/i', RegExpState.Valid],
        ['\\D/', RegExpState.Valid],
        ['\\f/', RegExpState.Valid],
        ['\\s/', RegExpState.Valid],
        ['\\t/', RegExpState.Valid],
        ['\\v/', RegExpState.Valid],
        ['\\W/', RegExpState.Valid],
        ['abc\\Sdeff/', RegExpState.Valid],
        ['abc\\q/', RegExpState.Invalid],
        ['abc\\x/', RegExpState.Invalid],
        ['\\X/', RegExpState.Invalid],
        ['\\z/', RegExpState.Invalid],
        ['\\x/', RegExpState.Invalid],
        ['\\oabcd/', RegExpState.Invalid],
        ['\\Mabcd/', RegExpState.Invalid],
        ['abc\\odeff/', RegExpState.Invalid],
        ['abc\\qdeff/', RegExpState.Invalid],
        ['\\Jabcd/', RegExpState.Invalid],
        ['\\o/', RegExpState.Invalid],
        ['abc\\e/', RegExpState.Invalid],
        ['abc\\A/', RegExpState.Invalid],
        ['abc\\H/', RegExpState.Invalid],
        ['abc\\J/', RegExpState.Invalid],
        ['abc\\L/', RegExpState.Invalid],
        ['\\Iabcd/', RegExpState.Invalid],
        ['abc\\_abcd/', RegExpState.Invalid],
        ['\\iabcd/', RegExpState.Invalid],
        ['abc\\adeff/', RegExpState.Invalid],
        ['\\rabcd/', RegExpState.Valid],
        ['\\tabcd/', RegExpState.Valid],
        ['\\vabcd/', RegExpState.Valid],
        ['\\sabcd/', RegExpState.Valid],
        ['abc\\s/', RegExpState.Valid],
        ['abc\\S/', RegExpState.Valid],
        ['abc\\W/', RegExpState.Valid],
        ['abc\\d/', RegExpState.Valid],
        ['\\gabcd/', RegExpState.Invalid],
        ['abc\\gdeff/', RegExpState.Invalid],
        ['[\\ud900y]/', RegExpState.Valid],
        ['[\\ud900\\ud900y]/', RegExpState.Valid],
        ['\\$abcd/', RegExpState.Valid],
        ['abc\\$abcd/', RegExpState.Valid],
        ['abc\\ideff/', RegExpState.Invalid],
        ['a|(|)/', RegExpState.Valid],
        ['[1-9]/', RegExpState.Valid],
        ['(((((((((((((a)))))))))))))\\13/', RegExpState.Valid],
        ['?/u', RegExpState.Invalid],
        ['a{23,2}/u', RegExpState.Invalid],
        ['x\\u0567/', RegExpState.Valid],
        ['abc\\Ddeff/u', RegExpState.Valid],
        ['\\ud800\\ud800\\udc00/u', RegExpState.Valid],
        ['\\u1234\\ud800/', RegExpState.Valid],
        ['\\u1234\\udc00/', RegExpState.Valid],
        ['\\u1234\\u1234\\udc00/', RegExpState.Valid],
        ['[-----]/u', RegExpState.Valid],
        ['\\u1234\\udc00\\udc00/', RegExpState.Valid],
        ['\\ud800\\udc00\\udc00/', RegExpState.Valid],
        ['\\ud800\\udc00\\ud800/', RegExpState.Valid],
        ['[C]/', RegExpState.Valid],
        ['[c]/', RegExpState.Valid],
        ['[D]/', RegExpState.Valid],
        ['[d]/', RegExpState.Valid],
        ['[I]/', RegExpState.Valid],
        ['[o]/', RegExpState.Valid],
        ['[O]/', RegExpState.Valid],
        ['[i]/', RegExpState.Valid],
        ['[m]/', RegExpState.Valid],
        ['[M]/', RegExpState.Valid],
        ['[K]/', RegExpState.Valid],
        ['[k]/', RegExpState.Valid],
        ['[-b]/', RegExpState.Valid],
        ['a{1}/u', RegExpState.Valid],
        // ['a{1/', RegExpState.Valid],
        //['/a{}/', RegExpState.Valid],
        ['a?/u', RegExpState.Valid],
        ['a+/', RegExpState.Valid],
        ['(?=a){1,2}/', RegExpState.Valid],
        ['(?=a){1}/', RegExpState.Valid],
        //['(?=a){}/', RegExpState.Valid],
        // ['(?=a){/', RegExpState.Valid],
        ['(?!foo)/', RegExpState.Valid],
        ['(?!)/', RegExpState.Valid],
        ['(?=)/', RegExpState.Valid],
        ['||||/', RegExpState.Valid],
        ['foo|bar/', RegExpState.Valid],
        ['foo/', RegExpState.Valid],
        ['[a-]/', RegExpState.Valid],
        ['[\\b]/', RegExpState.Valid],
        ['[a\\bc]/', RegExpState.Valid],
        ['[\\bc]/', RegExpState.Valid],
        ['[a\\-b]/', RegExpState.Unicode],
        ['[\\f]/', RegExpState.Unicode],
        ['[\\n]/', RegExpState.Unicode],
        ['[\\r]/', RegExpState.Unicode],
        ['[\\f]/', RegExpState.Unicode],
        ['[x\\ubcde\\udebcy]/y', RegExpState.Unicode],
        ['[A-Z\\W]/', RegExpState.Unicode],
        ['[A-\\Wx]/', RegExpState.Invalid],
        ['[1-9]/', RegExpState.Valid],
        ['[\\u5000-\\u6000]/', RegExpState.Valid],
        ['[\\uD83D\\uDCA9]/', RegExpState.Unicode],
        ['[--0]/', RegExpState.Valid],
        ['[-+]/', RegExpState.Valid],
        ['[+-]/', RegExpState.Valid],
        ['[---+]/', RegExpState.Valid],
        ['[---0]/', RegExpState.Valid],
        ['[-]/', RegExpState.Valid],
        ['[--]/', RegExpState.Valid],
        ['[---]/', RegExpState.Valid],
        ['[----]/', RegExpState.Valid],
        ['[------]/', RegExpState.Valid],
        ['[---------]/', RegExpState.Valid],
        ['a(b)/', RegExpState.Valid],
        ['()/', RegExpState.Valid],
        ['(?:b)/', RegExpState.Valid],
        ['a(?:b)/', RegExpState.Valid],
        ['(?:b)c/', RegExpState.Valid],
        ['(?=b)/', RegExpState.Valid],
        ['(?!b)/', RegExpState.Valid],
        ['a(?!b)/', RegExpState.Valid],
        ['a(?!b)c/', RegExpState.Valid],
        ['a(?!b(?:c)d)e/', RegExpState.Valid],
        ['a(?!b(?=c)d)e/', RegExpState.Valid],
        ['a(?!b(?!c)d)e/', RegExpState.Valid],
        ['(?!.)*/', RegExpState.Valid],
        ['(?!.)?/', RegExpState.Valid],
        ['(?!.){1}/', RegExpState.Valid],
        ['a|ab/', RegExpState.Valid],
        ['((a)|(ab))((c)|(bc))/', RegExpState.Valid],
        ['\\d{3}|[a-z]{4}/', RegExpState.Valid],
        ['\\d{3}|[a-z]{4}/', RegExpState.Valid],
        ['ab|cd|ef/i', RegExpState.Valid],
        ['ab|cd|ef/', RegExpState.Valid],
        ['s$/', RegExpState.Valid],
        ['e$/', RegExpState.Valid],
        ['[^o]t\\b/i', RegExpState.Valid],
        ['\\d{2,4}/', RegExpState.Valid],
        ['^.*(:|$)/', RegExpState.Valid],
        ['^.*?/', RegExpState.Valid],
        ['^.*?$/', RegExpState.Valid],
        ['.?.?.?.?.?.?.?/', RegExpState.Valid],
        ['\\??\\??\\??\\??\\??/', RegExpState.Valid],
        ['ab?c?d?x?y?z/', RegExpState.Valid],
        ['[Jj]ava([Ss]cript)?(?=\\:)/', RegExpState.GoodSansUFlag],
        ['(.*?)a(?!(a+)b\\2c)\\2(.*)/', RegExpState.Valid],
        ['((((((((((A))))))))))\\1\\2\\3\\4\\5\\6\\7\\8\\9\\10/', RegExpState.Valid],
        ['[d-h]+/', RegExpState.Valid],
        ['[1234567].{2}/', RegExpState.Valid],
        ['[a-c\\d]+/', RegExpState.Unicode],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['/.[\\b]./', RegExpState.Valid],
        ['/c[\\b]{3}d/', RegExpState.Valid],
        ['\\Bo\\B/i', RegExpState.Valid],
        ['[f-z]e\\B/', RegExpState.Valid],
        ['\\Bevil\\B/', RegExpState.Valid],
        ['[1234567].{2}/', RegExpState.Valid],
        ['^^^^^^^robot$$$$/', RegExpState.Valid],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['[d-h]+/', RegExpState.Valid],
        ['[1234567].{2}/', RegExpState.Valid],
        ['\\B\\w{4}\\B/', RegExpState.Valid],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['[d-h]+/', RegExpState.Valid],
        ['[1234567].{2}/', RegExpState.Valid],
        ['\\B[^z]{4}\\B/', RegExpState.Valid],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['[d-h]+/', RegExpState.Valid],
        ['[1234567].{2}/', RegExpState.Valid],
        ['\\B\\w/', RegExpState.Valid],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['((((((((((A))))))))))\\10\\9\\8\\7\\6\\5\\4\\3\\2\\1/', RegExpState.Valid],
        ['[]a/', RegExpState.Valid],
        ['q[ax-zb](?=\\s+)/', RegExpState.Valid],
        ['[^a-z]{4}/', RegExpState.Valid],
        ['?1/mig', RegExpState.Invalid],
        ['c[\\b]{3}d/', RegExpState.Valid],
        ['[a-z]+/', RegExpState.Valid],
        ['\\b(\\w+) \\1\\b/', RegExpState.Valid],
        ['([xu]\\d{2}([A-H]{2})?)\\1/', RegExpState.Valid],
        ['([xu]\\d{2}([A-H]{2})?)\\1/', RegExpState.Valid],
        ['\\ //', RegExpState.GoodSansUFlag],
        ['\\:/', RegExpState.GoodSansUFlag],
        ['(?=)/', RegExpState.Valid],
        //['a{1,/', RegExpState.Valid],
        ['a*?/', RegExpState.Valid],
        ['a+?/', RegExpState.Valid],
        ['a+?/', RegExpState.Valid],
        ['a??/u', RegExpState.Valid],
        ['a{1,}?/', RegExpState.Valid],
        ['a{1,}?/u', RegExpState.Valid],
        // ['a{1,?/', RegExpState.Valid],
        ['a{1,2}?/', RegExpState.Valid],
        ['a{1,2}?/u', RegExpState.Valid],
        // ['a{1,2?/', RegExpState.Valid],
        ['ðŸ‘ðŸš€â‡ï¸/', RegExpState.Valid],
        ['/ðŸ‘ðŸš€â‡ï¸/u', RegExpState.Valid],
        ['$/u', RegExpState.Valid],
        ['./u', RegExpState.Valid],
        [']/', RegExpState.Valid],
        // ['}/', RegExpState.Valid],
        ['${1,2/', RegExpState.Invalid],
        ['\\1(a)/', RegExpState.Valid],
        ['|a', RegExpState.Invalid],
        ['^', RegExpState.Invalid],
        ['^', RegExpState.Invalid],
        ['a*', RegExpState.Invalid],
        ['a*?', RegExpState.Invalid],
        ['?/', RegExpState.Invalid],
        ['+/', RegExpState.Invalid],
        ['?a/', RegExpState.Invalid],
        ['*/', RegExpState.Invalid],
        ['a**/', RegExpState.Invalid],
        ['+', RegExpState.Invalid],
        ['?a', RegExpState.Invalid],
        ['+a', RegExpState.Invalid],
        ['a++/', RegExpState.Invalid],
        ['a{100,45}/', RegExpState.Invalid],
        ['\\_abcd/', RegExpState.Invalid],
        ['\\_abcd/', RegExpState.Invalid],
        ['abc\\_/', RegExpState.Invalid],
        ['\\_/', RegExpState.Invalid],
        ['\\$', RegExpState.Invalid],
        ['\\\\', RegExpState.Invalid],
        ['{/', RegExpState.Invalid],
        [']/', RegExpState.Valid],
        [')/', RegExpState.Invalid],
        ['+/', RegExpState.Invalid],
        ['a|*/', RegExpState.Invalid],
        ['a|+/', RegExpState.Invalid],
        ['a|?/', RegExpState.Invalid],
        ['a|)/', RegExpState.Invalid],
        ['a|]/', RegExpState.Valid],
        ['a|{/', RegExpState.Invalid],
        ['a|}/', RegExpState.Invalid],
        ['a|(})/', RegExpState.Invalid],
        ['a(?)/', RegExpState.Invalid],
        ['a|(])/', RegExpState.Valid],
        ['a(*)/', RegExpState.Invalid],
        ['a(+)/', RegExpState.Invalid],
        ['a|\\/', RegExpState.Invalid],
        ['\\$', RegExpState.Invalid],
        ['abc\\_', RegExpState.Invalid],
        ['\\0(b)', RegExpState.Invalid],
        ['(a)\\0', RegExpState.Invalid],
        ['\\u{00000000000000000000110000}/', RegExpState.Invalid],
        ['\\u{0000000000000000000010ffff}/', RegExpState.Unicode],
        ['[b\\-a]/', RegExpState.Unicode],
        ['[a\\-b]/', RegExpState.Unicode],
        ['[abc\\_abcd]/', RegExpState.Invalid],
        ['[\\_abcd]/', RegExpState.Invalid],
        ['[\\\`]/', RegExpState.Invalid],
        ['(?=/', RegExpState.Invalid],
        ['[abc\\_abcd', RegExpState.Invalid],
        ['[\\u{10ffff}]/', RegExpState.Unicode],
        ['\\2(x)/', RegExpState.Invalid],
        ['[9-1]/', RegExpState.Invalid],
        ['[\\x01-\\u{347}]/', RegExpState.Invalid],
        ['[\\u{5}-1]/', RegExpState.Unicode],
        ['[x---]/', RegExpState.Invalid],
        ['[0---]/', RegExpState.Invalid],
        ['[x-\\uD83D\\uDE07--+]/', RegExpState.Invalid],
        ['[x-\\uD83D\\uDE07--x-\\uD83D\\uDE07--]/', RegExpState.Invalid],
        ['(', RegExpState.Invalid],
        [')/', RegExpState.Invalid],
        ['(?x)/', RegExpState.Invalid],
        ['(?', RegExpState.Invalid],
        ['(?:b)/', RegExpState.Valid],
        ['a(?:b)/', RegExpState.Valid],
        ['[a-dc-b]/', RegExpState.Invalid],
        ['[b-ac-e]/', RegExpState.Invalid],
        ['[\\db-G]/', RegExpState.Invalid],
        ['[\\Db-G]/', RegExpState.Invalid],
        ['[\\Sb-G]/', RegExpState.Invalid],
        ['[\\wb-G]/', RegExpState.Invalid],
        ['[\\Wb-G]/', RegExpState.Invalid],
        ['[\\0b-G]/', RegExpState.Invalid],
        ['[\\nd-G]/', RegExpState.Invalid],
        ['[\\vd-G]/', RegExpState.Invalid],
        ['[\\fd-G]/', RegExpState.Invalid],
        ['b-G\\0]/', RegExpState.Valid],
        ['[b-G\\10]/', RegExpState.Invalid],
        ['[d-G\\B]/', RegExpState.Invalid],
        ['[d-G\\t]/', RegExpState.Invalid],
        ['[b-G\\0]/', RegExpState.Invalid],
        ['[d-G\\u0061]/', RegExpState.Invalid],
        ['[b-G\\S]/', RegExpState.Invalid],
        ['[b-G\\w]/', RegExpState.Invalid],
        ['[\\vd-G]/', RegExpState.Invalid],
        ['\\b*/u', RegExpState.Invalid],
        ['\\b+/u', RegExpState.Invalid],
        ['\\b?/u', RegExpState.Invalid],
        ['\\b{1}/u', RegExpState.Invalid],
        ['[\\"]/u', RegExpState.Invalid],
        ['[\\\`]/u', RegExpState.Invalid],
        ['[\\u{afail}]/u', RegExpState.Invalid],
        ['[\\u{fail}]/u', RegExpState.Invalid],
        ['[\\u{a]/u', RegExpState.Invalid],
        ['[\\u{af]/u', RegExpState.Invalid],
        ['[\\u{012]/u', RegExpState.Invalid],
        ['[\\u{01234]/u', RegExpState.Invalid],
        ['[\\u{103456', RegExpState.Invalid],
        ['[\\u{12345', RegExpState.Invalid],
        ['[\\u{1234', RegExpState.Invalid],
        ['[\\u{123', RegExpState.Invalid],
        ['[\\u{af', RegExpState.Invalid],
        ['[\\u{120000}]/u', RegExpState.Unicode],
        ['[\\d-z]/u', RegExpState.Unicode],
        ['[a-\\dx]/u', RegExpState.Invalid],
        ['[A-\\S]/u', RegExpState.Invalid],
        ['[A-\\W]/u', RegExpState.Invalid],
        ['[a-\\w]/u', RegExpState.Invalid],
        ['[A-\\S]/u', RegExpState.Invalid],
        ['[a-\\s]/u', RegExpState.Invalid],
        ['[A-\\D]/u', RegExpState.Invalid],
        ['[a-\\d]/u', RegExpState.Invalid],
        ['[a-\\wx]/u', RegExpState.Invalid],
        ['[A-\\Sx]/u', RegExpState.Invalid],
        ['[a-\\sx]/u', RegExpState.Invalid],
        ['[9-1]/u', RegExpState.Invalid],
        ['[\\u6000-\\u5000]/u', RegExpState.Invalid],
        ['(?x)/u', RegExpState.Invalid],
        ['a(?:b)c/u', RegExpState.Valid],
        ['a(?:b)/u', RegExpState.Valid],
        ['(?!b)', RegExpState.Invalid],
        ['a(?=b(?:cd)e/u', RegExpState.Invalid],
        ['a(?=b(?:cde/u', RegExpState.Invalid],
        ['a(?=b(?=cd)e/u', RegExpState.Invalid],
        ['a(?!b(c)de/u', RegExpState.Invalid],
        ['a(?!b(cde/u', RegExpState.Invalid],
        ['a(?!b(?:cde/u', RegExpState.Invalid],
        ['a(?!b(?=cd)e/u', RegExpState.Invalid],
        ['a(?!b(?=cde/u', RegExpState.Invalid],
        ['a(?!b(?!cd)e/u', RegExpState.Invalid],
        ['a(?!b(?!cde/u', RegExpState.Invalid],
        ['+a/u', RegExpState.Invalid],
        ['[b-ac-e]/u', RegExpState.Invalid],
        ['[a-dc-b]/u', RegExpState.Invalid],
        ['[\\db-G]/u', RegExpState.Invalid],
        ['[\\c0001d-G]/u', RegExpState.Invalid],
        ['[d-G\\b]/u', RegExpState.Invalid],
        ['\\B+/u', RegExpState.Invalid],
        ['\\b?/u', RegExpState.Invalid],
        ['\\7/u', RegExpState.Invalid],
        ['abc\\tdeff', RegExpState.Invalid],
        ['abc\\wdeff/', RegExpState.Valid],
        ['abc\\tdeff/', RegExpState.Valid],
        ['abc\\vdeff/', RegExpState.Valid],
        ['abc\\Wdeff/', RegExpState.Valid],
        ['\\tabcd/', RegExpState.Valid],
        ['\\Sabcd/', RegExpState.Valid],
        ['abc\\p/', RegExpState.Invalid],
        ['abc\\q/', RegExpState.Invalid],
        ['\\T/', RegExpState.Invalid],
        ['abc\\pdeff/', RegExpState.Invalid],
        ['abc\\Jdeff/', RegExpState.Invalid],
        [`\\'/`, RegExpState.GoodSansUFlag],
        [`\\"/`, RegExpState.GoodSansUFlag],
        ['$/', RegExpState.Valid],
        ['abc\\v/', RegExpState.Valid],
        ['abc\\w/', RegExpState.Valid],
        ['abc\\W/', RegExpState.Valid],
        ['foo/gmi', RegExpState.Valid],
        ['foo/mi', RegExpState.Valid],
        ['a{9,94}/', RegExpState.Valid],
        ['a{6,61}/', RegExpState.Valid],
        ['a{5,50}/', RegExpState.Valid],
        ['a{2,27}/', RegExpState.Valid],
        ['a{0,15}/', RegExpState.Valid],
        ['a{,38}/', RegExpState.Valid],
        ['a{,49}/', RegExpState.Valid],
        ['a{,72}/', RegExpState.Valid],
        ['a{,83}/', RegExpState.Valid],
        ['a{9,9}/', RegExpState.Valid],
        ['a{0,}/', RegExpState.Valid],
        ['a{9,}/', RegExpState.Valid],
        ['a{2,}/', RegExpState.Valid],
        ['a{67}/', RegExpState.Valid],
        ['a{34}/', RegExpState.Valid],
        ['a{11}/', RegExpState.Valid],
        ['a{4}/', RegExpState.Valid],
        ['a{2}/', RegExpState.Valid],
        ['a{0}/', RegExpState.Valid],
        ['a{0,0}/', RegExpState.Valid],
        ['a{90,9}/', RegExpState.Invalid],
        ['a{67,6}/', RegExpState.Invalid],
        ['a{45,4}/', RegExpState.Invalid],
        ['a{12,1}/', RegExpState.Invalid],
        ['a{1,0}/', RegExpState.Invalid],
        ['a{01,1}/', RegExpState.Invalid],
        ['a{0x15,02}/', RegExpState.Invalid],
        ['a{0x01,1}/', RegExpState.Invalid],
        ['a{00,0o01}/', RegExpState.Invalid],
        ['a{ 1 , 1 }/', RegExpState.Invalid],
        ['a{1,1 }/', RegExpState.Invalid],
        ['a{ 1, 1}/', RegExpState.Invalid],
        ['a{1, 1}/', RegExpState.Invalid],
        ['a{ 1}/', RegExpState.Invalid],
        ['\\cu/', RegExpState.Valid],
        ['\\cv/', RegExpState.Valid],
        ['\\cx/', RegExpState.Valid],
        ['\\cy/', RegExpState.Valid],
        ['\\cz/', RegExpState.Valid],
        ['\\x4e/', RegExpState.Valid],
        ['\\x3d/', RegExpState.Valid],
        ['\\x23/', RegExpState.Valid],
        ['\\xCD/', RegExpState.Valid],
        ['\\xEF/', RegExpState.Valid],
        ['\\x6A/', RegExpState.Valid],
        ['\\x5f/', RegExpState.Valid],
        ['\\xc3/', RegExpState.Valid],
        ['\\x12/', RegExpState.Valid],
        ['\\x90/', RegExpState.Valid],
        ['\\x23/', RegExpState.Valid],
        ['\\x89/', RegExpState.Valid],
        ['/a\\0b/', RegExpState.Valid],
        ['(a)\\0/', RegExpState.Valid],
        ['(1\\0)/', RegExpState.Valid],
        ['\\0/', RegExpState.Valid],
        ['\\0b/', RegExpState.Valid],
        ['a\\0/', RegExpState.Valid],
        ['(a|\\1)/', RegExpState.Valid],
        ['\\1|(a)/', RegExpState.Valid],
        ['4\\1(a)/', RegExpState.Valid],
        ['\\1x(a)/', RegExpState.Valid],
        ['(a)\\1/', RegExpState.Valid],
        ['\\x89/', RegExpState.Valid],
        ['\\x9/', RegExpState.Invalid],
        ['\\x5/', RegExpState.Invalid],
        ['\\x6/', RegExpState.Invalid],
        ['\\x8/', RegExpState.Invalid],
        ['\\x67', RegExpState.Invalid],
        ['\\x90', RegExpState.Invalid],
        ['\\x0', RegExpState.Invalid],
        ['\\x5/', RegExpState.Invalid],
        ['\\x90', RegExpState.Invalid],
        ['\\x9', RegExpState.Invalid],
        ['\\x01', RegExpState.Invalid],
        ['\\x', RegExpState.Invalid],
        ['\\11|(a)/', RegExpState.Invalid],
        ['\\08/', RegExpState.Invalid],
        ['\\00/', RegExpState.Invalid],
        ['\\06(b)/', RegExpState.Invalid],
        ['(a)\\05/', RegExpState.Invalid],
        ['4\\1(a)', RegExpState.Invalid],
        ['\\1|a)', RegExpState.Invalid],
        ['(a)\\3/', RegExpState.Invalid],
        ['\\1x(a)', RegExpState.Invalid],
        ['\\2(a)/', RegExpState.Invalid],
        ['(a)x\\1', RegExpState.Invalid],
        ['(a\\1b)', RegExpState.Invalid],
        ['0\\1(a)', RegExpState.Invalid],
        ['4\\1(a)', RegExpState.Invalid],
        ['a\\04b/', RegExpState.Invalid],
        ['(\\07)/', RegExpState.Invalid],
        ['(\\0)/', RegExpState.Valid],
        ['(1\\0)/', RegExpState.Valid],
        ['a\\0b/', RegExpState.Valid],
        ['\\0/', RegExpState.Valid],
        ['(a)\\1/', RegExpState.Valid],
        ['((a))\\2/', RegExpState.Valid],
        ['(((((a)))))\\4/', RegExpState.Valid],
        ['((((((((((((((((((a))))))))))))))))))\\17/', RegExpState.Valid],
        ['(((((((((((((((a)))))))))))))))\\14/', RegExpState.Valid],
        ['((((((((((((((((((((a))))))))))))))))))))\\20/', RegExpState.Valid],
        ['((((((((((a))))))))))\\10/', RegExpState.Valid],
        ['x\\u0567/', RegExpState.Valid],
        ['\\uf89ay/', RegExpState.Valid],
        ['x\\ubcdey/', RegExpState.Valid],
        ['\\u1234\\u1234\\udc00/', RegExpState.Valid],
        ['x\\u0567\\u0567\\udc10/', RegExpState.Valid],
        ['(?=)/', RegExpState.Valid],
        ['[]b/', RegExpState.Valid],
        ['a[]b/', RegExpState.Valid],
        ['a[]/', RegExpState.Valid],
        ['[]/', RegExpState.Valid],
        ['[Y]/', RegExpState.Valid],
        ['[x]/', RegExpState.Valid],
        ['[y]/', RegExpState.Valid],
        ['[Z]/', RegExpState.Valid],
        ['[K]/', RegExpState.Valid],
        ['[k]/', RegExpState.Valid],
        ['[g]/', RegExpState.Valid],
        ['(?=)/', RegExpState.Valid],
        ['[\\bc]/', RegExpState.Valid],
        ['[0\\0b]/', RegExpState.Valid],
        ['[\\0b]/', RegExpState.Valid],
        ['[a\\0]/', RegExpState.Valid],
        ['[\\0]/', RegExpState.Valid],
        ['[\\s]/', RegExpState.Unicode],
        ['[\\n]/', RegExpState.Unicode],
        ['[\\d]/', RegExpState.Unicode],
        ['||||/', RegExpState.Valid],
        ['||||/', RegExpState.Valid],
        ['(?!)/', RegExpState.Valid],
        ['(?=)/', RegExpState.Valid],
        ['||||/', RegExpState.Valid],

    ]

    for (const [regExp, state] of regExs) {
        it(`scans '${regExp}'`, () => {
            const parser = createParserObject(regExp, undefined);
            const found = scanRegExp(parser, Context.Empty);
            t.deepEqual({
                token: found,
            }, {
                token: state,
            });
        });
    }
});
